---
title: 微信小程序踩坑记录
date: 2020-07-09 11:40:21
tags:
---
1. canvas 画图，字体颜色不对啦，缺失画的那些矩形啦，字体大小不对啦（测试说在 iOS 上出现的几率比较小，在 Android 上出现的几率比较大）

    解决办法（测试说概率降低了很多）：
-  把异步操作提出来，用 promise 去包起来。最后用一个 `Promise.all([p1,p2,p3]).then(...)` 之后再去画图
  这里涉及到的有：跑接口拿数据，`wx.getImageInfo() `
  wx.getImageInfo - 需要注意的是，微信小程序的画布不能直接用网络图片，需要利用 `wx.getImageInfo({})` 来将网络图片转化为本地图片（不查资料我还真一脸懵逼呢）

- 加延时 加延时 加延时 还得在这个地方加才比较有用
``` bash
ctx.draw(false, () => {
  setTimeout(() => {
    this.drawCode()
  }, 3000)
})
```

参考资料：
[资料1](https://www.cnblogs.com/At867604340/p/11601402.html)
[资料2](https://my.oschina.net/u/4053340/blog/3007106)