---
title: 前端工具更新过程
date: 2020-06-21 23:24:17
tags:
---
## git/npm/node/brew/yarn等的更新过程
git & brew 更新版本
brew 是macOS 自带的，所以我就把两个一起更新了
查看 git 安装目录
```
$ which git
/usr/local/bin/git
```
查看 git 版本：
```
$ git --version
git version 2.17.0
```
macOS 上面更新 git 的命令：`brew install git`

遇到问题：
1. 很久都没有反应
2. ctrl + v 说我已经装过了
```
$ brew install git
Updating Homebrew...
^CWarning: git 2.17.0 is already installed and up-to-date
To reinstall 2.17.0, run `brew reinstall git`
```
2. brew 更新
```
brew update
$ brew update
fatal: unable to access 'https://github.com/Homebrew/homebrew-core/': LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 60
Error: Fetching /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core failed!
```
也不知道怎么解决，gg也搜不到相关的 errorno 60的关键字，很多都是 errorno 56什么的

看了一眼这个，也没什么东西
```
$ brew -v
Homebrew 2.4.0
Homebrew/homebrew-core (git revision dae7; last commit 2018-04-22)
```
```
$ brew tap
homebrew/core
homebrew/services
```

还有说是 untap 的，也翻车了：
```
$ brew untap homebrew/core
Error: Untapping homebrew/core is not allowed
```
换什么中科院的镜像地址，依旧翻车：
```
$ git clone git://mirrors.ustc.edu.cn/homebrew-core.git/ /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core --depth=1

fatal: destination path '/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core' already exists and is not an empty directory.
```

网上还说用这个方法的，换地址，也没成功（昨天我的 brew install git 成功过一次然后我就执行了，不知道今天的失败是不是和这个有关系）：
```
$ brew link git --overwrite
Warning: Already linked: /usr/local/Cellar/git/2.17.0
To relink:
  brew unlink git && brew link git
```
```
$ brew unlink git && brew link git
Unlinking /usr/local/Cellar/git/2.17.0... 188 symlinks removed
Linking /usr/local/Cellar/git/2.17.0... 188 symlinks created
```
百思不得其解之后，执行 `brew doctor` 检查一下：
一大堆 warning，也没有看到报错，也就是说 brew 应该没问题？

那好吧只能强制更新：
```
$ brew update-reset
==> Fetching /usr/local/Homebrew...
remote: Enumerating objects: 3, done.
remote: Counting objects: 100% (3/3), done.
remote: Total 4 (delta 3), reused 3 (delta 3), pack-reused 1
Unpacking objects: 100% (4/4), done.
From https://github.com/Homebrew/brew
 * [new branch]          dependabot/bundler/docs/parallel-1.19.2 -> origin/dependabot/bundler/docs/parallel-1.19.2
... 省略好多好多代码...
Your branch is up to date with 'origin/master'.
```
很顺利，接着更新 brew：
```
$ brew update
Already up-to-date.
```
好吧昨天竟然更新成功了，那我今天半天都在干嘛？

那就更新 git :
```
brew upgrade git

==> Downloading https://homebrew.bintray.com/bottles-portable-ruby/portable-ruby-2.6.3_2.yosemite.bottle.tar.gz
######################################################################## 100.0%
==> Pouring portable-ruby-2.6.3_2.yosemite.bottle.tar.gz
Updating Homebrew...
==> Upgrading 1 outdated package:
git 2.17.0 -> 2.27.0
==> Upgrading git 2.17.0 -> 2.27.0 
==> Downloading https://homebrew.bintray.com/bottles/gettext-0.20.2_1.mojave.bot
==> Downloading from https://akamai.bintray.com/52/52067198cab528f05fdc0b06f7b97
#                                                                          1.6%
curl: (56) LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 60
...省略好多好多代码...
Emacs Lisp files have been installed to:
  /usr/local/share/emacs/site-lisp/git
```

看起来并没有报错，检查一下！
```
$ git --version
git version 2.27.0
```
终于更新了！
参考资料：
https://juejin.im/post/5c3e9de86fb9a049b5071413
https://juejin.im/post/5c3e9de86fb9a049b5071413

node /  npm / yarn 更新
资料：https://www.jianshu.com/p/c641dcc47b48

查看版本：
```
node -v
npm -v
```

用 n 管理器管理 node 版本号
```
$ npm install -g n
```
利用 n 下载所需node
```
$ n 版本号  
```
下载最新版本
```
$ n latest
```
删除某个版本
```
$ n rm 7.3.4
```
查看当前 node 版本
```
$ node -v
```
切换版本
```
$ n

  8.9.0
ο 12.16.3
  7.3.4
```
以指定的版本来执行脚本
```
$ n use 8.9.0 test.js
```
升级node.js到最新稳定版：`n stable`

你也可以用 nvm 听说会比 n 更强大一点。github地址：https://github.com/creationix/nvm
macOS 装的 n 比较早，Win 用的 nvm-windows 的，本来打算卸载 n 装 nvm，但是总是忘记，所以先用着再说，毕竟 n 看起来更简洁一点。

更新 npm
```
npm install -g npm
```
更新 yarn
```
Nom install -g yarn
```